库存服务:
浏览器的等请求到商品服务,操作完后其实是设置了库存的,也就是商品服务会调用库存服务
订单服务会预扣库存和归还库存 支付服务会扣库存(支付宝调用支付服务)
库存一般提供给其他rpc服务调用,自身不用设置api层





并发情况下库存比如扣减库存容易出现问题,其实就是并发修改stock,可能多个调用这个库存微服务去扣减库存
解决并发问题,最原始的方式就是加锁

注意这里通过channel并不能很好处理,channel是不同goroutine之间传递信息,同步操作,而这里是不同的进程了,channel适合自身的代码内的并发设计,不同进程要使用分布式锁(可以将数据库中的数据拿到内存中,也就是一个变量,channel来协调多个goroutine来设置这个变量)
比如定义一个变量int,一个channel int,gorouine中使用这个变量,修改这个变量,将值写入channel,然后主goroutine读取channel值给变量
或者直接加锁
缓冲通道实际上就是多个缓冲,由元素就不阻塞,本质还是channel,同一时间只有一个goroutine在处理




